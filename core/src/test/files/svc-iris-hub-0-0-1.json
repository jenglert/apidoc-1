{
    "base_url": "http://svc-iris-hub/svc-iris-hub/1.0",
    "name": "Iris Hub",
    "description": "Iris Hub provides an API to allow vendor to vendor communication and purchasing. One way to think about the hub is a modern EDI - very simple REST interface to enable purchasing and fulfillment between two vendors.",
    "resources": {

        "vendors": {

            "description": "A vendor is one of the main concepts in IRIS HUB. All activity is tied to a vendor.",

            "fields": [
                { "name": "guid", "type": "string", "format": "uuid", "description": "Uniquely identifies this vendor" },
                { "name": "name", "type": "string", "description": "The name of this vendor - just used as a label for people to read." },
                { "name": "key", "type": "string", "description": "A unique, url friendly key for this vendor. keys are always stored in lower case." }
            ],

            "operations": [
                {
                    "method": "GET",
                    "description": "Search all vendors. Results are always paginated.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid", "required": false, "description": "Finds the vendor with this guid. Exact match" },
                        { "name": "name", "type": "string", "required": false, "description": "Finds the vendor with this name. Exact match" },
                        { "name": "key", "type": "string", "required": false, "description": "Finds the vendor with this key. Exact match" },
                        { "name": "limit", "type": "integer", "default": 50, "description": "The number of records to return", "minimum": 0, "maximum": 50 },
                        { "name": "offset", "type": "integer", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
                        "200" => { "type": "[vendor]" }
                    }
                },

                {
                    "method": "GET",
                    "path": "/:guid",
                    "description": "Retrieve this vendor.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid" }
                    ],
                    "responses": {
                      { "200" => "vendor" }
                    }
                },

                {
                    "method": "POST",
                    "parameters": [
                        { "name": "name", "type": "string" }
                    ],
                    "responses": {
                        "201" => { "type": "vendor" },
                        "409" => { "type": "validation" }
                    }
                },

                {
                    "method": "DELETE",
                    "path": "/:guid"
                }
            ]
        },

        "items": {

            "description": "An item represents a physical or virtual thing that can be purchased.",

            "fields": [
                { "name": "guid", "type": "string", "format": "uuid", "description": "Uniquely identifies this record" },
                { "name": "vendor", "references": "vendors.guid", "fields": ["name", "key"] },
                { "name": "number", "type": "string", "description": "This is the vendor's unique identifier for this item. The item number is case sensitive." },
                { "name": "quantity", "type": "long", "description": "The number of units that this vendor currently has available for sale.", "required": false },
                { "name": "data", "type": "string", "description": "JSON Document containing extended data about this item.", "required": false }
            ],

            "operations": [
                {
                    "method": "GET",
                    "description": "Search all items. Results are always paginated.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid", "required": false },
                        { "name": "guids", "type": "[string]", "format": "uuid", "required": false, "maximum": 100 },
                        { "name": "vendor_guid", "type": "string", "format": "uuid", "required": false, "references": "vendors.guid" },
                        { "name": "agreement_guid", "type": "string", "format": "uuid", "required": false, "description": "Fetches items for the fulfilling vendor according to the specific agreement guid.", "references": "agreements.guid" },
                        { "name": "number", "type": "string", "required": false },
                        { "name": "limit", "type": "integer", "default": 50 },
                        { "name": "offset", "type": "integer", "default": 0 }
                    ],
                    "responses": {
                        "200" => { "type": "[item]", "fields": ["guid", "vendor", "number", "quantity"] }
                    }
                },
                {
                    "method": "GET",
                    "path": "/:guid",
                    "description": "Gets the detailed view of this item, including the full json document of all of the attributes.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid", "references": "items.guid" }
                    ],
                    "responses": {
                        "200" => { "type": "item" }
                    }
                },
                {
                    "method": "POST",
                    "parameters": [
                        { "name": "vendor_guid", "type": "string", "format": "uuid", "references": "vendors.guid" },
                        { "name": "number", "type": "string" },
                        { "name": "quantity", "type": "long", "required": false, "default": 0 }
                    ],
                    "responses": {
                        "201" => { "type": "item" }
                    }
                },
                {
                    "method": "PUT",
                    "path": "/:guid",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid", "references": "items.guid" },
                        { "name": "number", "type": "string" },
                        { "name": "quantity", "type": "long" }
                    ],
                    "responses": {
                        "200" => { "type": "item" }
                    }
                },
                {
                    "method": "PATCH",
                    "description": "Allows an incremental update to an existing item.",
                    "path": "/:guid",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid", "references": "items.guid" },
                        { "name": "number", "type": "string" },
                        { "name": "quantity", "type": "long" }
                    ],
                    "responses": {
                        "200" => { "type": "item" }
                    }
                },
                {
                    "method": "DELETE",
                    "path": "/:guid",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid" }
                    ]
                }
            ]
        },

        "terms": {
            "description": "Represents the terms by which two vendors are transacting. Primary purpose is to capture things like 'NET30' so that both parties can correctly invoice and pay.",
            "fields": [
                { "name": "guid", "type": "string", "format": "uuid", "description": "Uniquely identifies this record" },
                { "name": "vendor_guid", "type": "string", "format": "uuid", "references": "vendors.guid" },
                { "name": "code", "type": "string", "description": "An identifier that people at both vendors understand (e.g. NET30)." },
                { "name": "description", "type": "string", "required": false, "description": "Description to help people understand the intent of the terms (e.g. Payment is due 30 days after receipt of invoice)" }
            ],
            "operations": [
                {
                    "method": "GET",
                    "description": "Search all terms. Results are always paginated.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid", "required": false, "references": "terms.guid" },
                        { "name": "vendor_guid", "type": "string", "format": "uuid", "required": false, "references": "vendors.guid" },
                        { "name": "code", "type": "string", "required": false },
                        { "name": "limit", "type": "integer", "default": 50 },
                        { "name": "offset", "type": "integer", "default": 0 }
                    ],
                    "responses": {
                        "200" => { "type": "[term]" }
                    }

                },
                {
                    "method": "POST",
                    "parameters": [
                        { "name": "vendor_guid", "references": "vendors.guid" },
                        { "name": "code", "type": "string" },
                        { "name": "description", "type": "string", "required": false }
                    ],
                    "responses": {
                        "200" => { "type": "term" }
                    }
                },
                {
                    "method": "DELETE",
                    "path": "/:guid",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid" }
                    ]
                }
            ]
        },

        "agreements": {
            "description": "An agreement outlines the terms by which two vendors work together.",
            "fields": [
                { "name": "guid", "type": "string", "format": "uuid", "description": "Uniquely identifies this agreement" },
                { "name": "identifier", "type": "string", "description": "A human readable unique identifier for this agreement. Format will be something like IA2014-123456 - IA: Iris Agreement followed by the year followed by a number." },
                { "name": "purchasing_vendor_guid", "type": "string", "format": "uuid", "references": "vendors.guid", "description": "The vendor that will be purchasing items - i.e. the vendor that will be responsible for creating the Purchases in Iris Hub" },
                { "name": "fulfilling_vendor_guid", "type": "string", "format": "uuid", "references": "vendors.guid", "description": "The vendor that will be fulfilling items - i.e. the vendor that will be responsible for receiving a shipment request and actually shipping the goods." },
                { "name": "term_guid", "type": "string", "format": "uuid", "references": "terms.guid", "description": "The specific payment terms in place for this agreement" },
                { "name": "begin_datetime", "type": "string", "format": "date-time-iso8601", "description": "The date on which this agreement goes into effect." },
                { "name": "end_datetime", "type": "string", "format": "date-time-iso8601", "required": false, "description": "The date on which this agreement ends. If not specified, this agreement is considered perpetual and it never ends." },
                { "name": "currency", "type": "string", "description": "Determines the currency in which transactions pertaining to this agreement are made. The value is the 3-character upper case iso4217 code for this currency", "example": "USD or EUR" }
            ],
            "operations": [
                {
                    "method": "GET",
                    "description": "Search all agreements. Results are always paginated.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid", "required": false },
                        { "name": "identifier", "type": "string", "required": false },
                        { "name": "purchasing_vendor_guid", "type": "string", "format": "uuid", "required": false },
                        { "name": "fulfilling_vendor_guid", "type": "string", "format": "uuid", "required": false },
                        { "name": "limit", "type": "integer", "default": 50 },
                        { "name": "offset", "type": "integer", "default": 0 }
                    ],
                    "responses": {
                        "200" => { "type": "[agreement]" }
                    }
                },
                {
                    "method": "POST",
                    "parameters": [
                        { "name": "purchasing_vendor_guid", "references": "vendors.guid" },
                        { "name": "fulfilling_vendor_guid", "references": "vendors.guid" },
                        { "name": "term_guid", "references": "terms.guid" },
                        { "name": "begin_datetime", "type": "string", "format": "date-time-iso8601" },
                        { "name": "end_datetime", "type": "string", "format": "date-time-iso8601", "required": false },
                        { "name": "currency", "type": "string", "description": "3-character upper case iso4217 code for this currency", "example": "USD or EUR" }
                    ],
                    "responses": {
                        "200" => { "type": "agreement" }
                    }
                },
                {
                    "method": "DELETE",
                    "path": "/:guid",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid" }
                    ]
                }
            ]
        },

        "shipment_schedules": {
            "path": "/shipment-schedules",
            "description": "A shipment schedule defines how frequently a vendor would like to ship. A common use case is to ship every week on monday. IRIS will then aggregate pending purchases into a single shipment request on Mondays for the vendor to ship in bulk.",
            "fields": [
                { "name": "guid", "type": "string", "format": "uuid", "description": "Uniquely identifies this record" },
                { "name": "vendor_guid", "type": "string", "format": "uuid", "references": "vendors.guid" },
                { "name": "frequency", "type": "string", "description": "supported values: immediate (e.g. for drop ship orders create shipment requests immediately following purchase), daily (create one shipment request / day), weekly (create one shipment request / week)." },
                { "name": "begin_datetime", "type": "string", "format": "date-time-iso8601", "description": "Date on which to start schedule. For daily/weekly schedules, determines the day of the week on which to generate a shipment request" }
            ],
            "operations": [
                {
                    "method": "GET",
                    "description": "Search all shipment requests. Results are always paginated.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid", "required": false },
                        { "name": "agreement_guid", "type": "string", "format": "uuid", "required": false, "references": "agreements.guid" },
                        { "name": "vendor_guid", "type": "string", "format": "uuid", "required": false, "references": "vendors.guid" },
                        { "name": "limit", "type": "integer", "default": 50 },
                        { "name": "offset", "type": "integer", "default": 0 }
                    ],
                    "responses": {
                        "200" =>  { "type": "[shipment_schedule]" }
                    }
                },
                {
                    "method": "POST",
                    "parameters": [
                        { "name": "vendor_guid", "type": "string" },
                        { "name": "frequency", "type": "string" },
                        { "name": "begin_datetime", "type": "string", "format": "date-time-iso8601" }
                    ],
                    "responses": {
                        "200", { "type": "shipment_schedule" }
                    }
                },
                {
                    "method": "DELETE",
                    "path": "/:guid",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid" }
                    ]
                }
            ]
        },

        "planned_shipments": {
            "path": "/planned-shipments",
            "description": "A date of the next planned shipment (tied to the closure of the shipment request). It's based on the shipment schedule frequency and begin_datetime",
            "fields": [
                { "name": "datetime", "type": "string", "format": "date-time-iso8601", "description": "The date and time of an upcoming shipment." }
            ],
            "operations": [
                {
                    "method": "GET",
                    "description": "Returns the upcoming planned shipments for a given agreement, filtered by a certain number of days. For example, you can request all planned shipments in the next 30 days - you will then see the actual upcoming dates, if any, that an open shipment request will be cloesd. Results are always paginated.",
                    "parameters": [
                        { "name": "agreement_guid", "type": "string" },
                        { "name": "number_days", "type": "integer", "default": 7 },
                        { "name": "limit", "type": "integer", "default": 50 },
                        { "name": "offset", "type": "integer", "default": 0 }
                    ],
                    "responses": {
                        "200" => { "type": "[planned_shipment]" }
                    }
                }
            ]
        },

        "purchases": {
            "description": "A purchase represents one vendor purchasing one unit of an item from another vendor. In many ERP systems, the purchase will map to the concept of an order item - e.g. one item on an order. IRIS operates solely on the level of line items to provide a simple interface that gracefully handles many of the operational differences that occur in real life including short shipments, split shipments, etc. Each purchase a destination address which represents the recipient of the purchase - i.e. where the item should be delivered.",
            "fields": [
                { "name": "guid", "type": "string", "format": "uuid", "description": "Uniquely identifies this record" },
                { "name": "vendor_purchase_number", "type": "string", "description": "Unique identifier in vendor's system for this purchase. This token is used to ensure that a purchase is not duplicated in IRIS" },
                { "name": "agreement_guid", "type": "string", "format": "uuid", "references": "agreements.guid" },
                { "name": "item_guid", "type": "string", "format": "uuid", "references": "items.guid" },
                { "name": "price", "type": "decimal", "description": "Price of the item being purchased. Currency is that of the agreement." },
                { "name": "address_name", "type": "string", "required": false },
                { "name": "address_line1", "type": "string" },
                { "name": "address_line2", "type": "string", "required": false },
                { "name": "address_line3", "type": "string", "required": false },
                { "name": "address_city", "type": "string", "required": false },
                { "name": "address_state", "type": "string", "required": false },
                { "name": "address_postal_code", "type": "string" },
                { "name": "address_country", "type": "string" },
                { "name": "address_phone", "type": "string", "required": false }
            ],
            "operations": [
                {
                    "method": "GET",
                    "description": "Search all purchases. Results are always paginated.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid", "required": false },
                        { "name": "vendor_purchase_number", "type": "string", "required": false },
                        { "name": "agreement_guid", "type": "string", "format": "uuid", "required": false, "references": "agreements.guid" },
                        { "name": "item_guid", "type": "string", "format": "uuid", "required": false, "references": "items.guid" },
                        { "name": "limit", "type": "integer", "default": 50 },
                        { "name": "offset", "type": "integer", "default": 0 }
                    ],
                    "responses": {
                        "200" => { "type": "[purchase]" }
                    }
                },
                {
                    "method": "GET",
                    "path": "/:guid",
                    "description": "Returns the purchase with this guid.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid" }
                    ],
                    "responses": {
                        "200" => { "type": "purchase" }
                    }
                },
                {
                    "method": "POST",
                    "parameters": [
                        { "name": "vendor_purchase_number", "type": "string" },
                        { "name": "agreement_guid", "type": "string" },
                        { "name": "item_guid", "type": "string" },
                        { "name": "address_name", "type": "string", "required": false },
                        { "name": "address_line1", "type": "string" },
                        { "name": "address_line2", "type": "string", "required": false },
                        { "name": "address_line3", "type": "string", "required": false },
                        { "name": "address_city", "type": "string", "required": false },
                        { "name": "address_state", "type": "string", "required": false },
                        { "name": "address_postal_code", "type": "string" },
                        { "name": "address_country", "type": "string", "description": "3 character iso3166_code for the country. Must be in upper case." },
                        { "name": "address_phone", "type": "string", "required": false },
                        { "name": "price", "type": "decimal", "description": "Price of the item being purchased. Currency is that of the agreement." },
                        { "name": "currency", "type": "string", "description": "3-character upper case iso4217 code for this currency. Validated against the currency in the agreement.", "example": "USD or EUR" }
                    ],
                    "responses": {
                        "201" => { "type": "purchase" }
                    }
                }
            ]
        },

        "shipment_requests": {
            "path": "/shipment-requests",
            "description": "A shipment request refers to a collection of items that the fulfilling vendor should now ship to a single address, subject to the terms of a single agreement. Conceptually - a shipment request relates to one order that the vendor must now ship - containing at least 1 item in it.",
            "fields": [
                { "name": "guid", "type": "string", "format": "uuid", "description": "Uniquely identifies this record" },
                { "name": "agreement_guid", "type": "string", "format": "uuid", "references": "agreements.guid" },
                { "name": "identifier", "type": "string", "description": "A human readable unique identifier for this shipment request. Format will be something like SR2014-123456 - SR: Shipment Request followed by the year followed by a number." },
                { "name": "address_name", "type": "string", "required": false },
                { "name": "address_line1", "type": "string" },
                { "name": "address_line2", "type": "string", "required": false },
                { "name": "address_line3", "type": "string", "required": false },
                { "name": "address_city", "type": "string", "required": false },
                { "name": "address_state", "type": "string", "required": false },
                { "name": "address_postal_code", "type": "string" },
                { "name": "address_country", "type": "string" },
                { "name": "address_phone", "type": "string", "required": false }
            ],
            "operations": [
                {
                    "method": "GET",
                    "description": "Search all shipment requests. Results are always paginated.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid", "required": false },
                        { "name": "fulfilling_vendor_guid", "type": "string", "format": "uuid", "required": false, "references": "vendors.guid" },
                        { "name": "agreement_guid", "type": "string", "format": "uuid", "required": false, "references": "agreements.guid" },
                        { "name": "identifier", "type": "string", "required": false },
                        { "name": "is_open", "type": "boolean", "required": false },
                        { "name": "limit", "type": "integer", "default": 50 },
                        { "name": "offset", "type": "integer", "default": 0 }
                    ],
                    "responses": {
                        "200" => { "type": "[shipment_request]" }
                    }
                },
                {
                    "method": "PUT",
                    "path": "/:guid",
                    "description": "Closes an open shipment request ahead of schedule.",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid" }
                    ],
                    "responses": {
                        "201" => { "type": "shipment_request" }
                    }
                }
            ]
        },

        "shipment_request_items": {
            "path": "/shipment-request-items",
            "description": "Represents the list of items inside one shipment request.",
            "fields": [
                { "name": "shipment_request_guid", "type": "string", "format": "uuid", "references": "shipment_requests.guid" },
                { "name": "item_guid", "type": "string", "format": "uuid", "references": "items.guid" },
                { "name": "item_number", "type": "string", "description": "The fulfilling vendor's number", "references": "items.number" },
                { "name": "quantity", "type": "long", "description": "The quantity requested for this item", "minimum": 1 }
            ],

            "operations": [
                {
                    "method": "GET",
                    "description": "Retrieve the items in a shipment request. Results are always paginated.",
                    "parameters": [
                        { "name": "shipment_request_guid", "type": "string" },
                        { "name": "limit", "type": "integer", "default": 50 },
                        { "name": "offset", "type": "integer", "default": 0 }
                    ],
                    "responses": {
                        "200" => { "type": "[shipment_request_item]" }
                    }
                }
            ]
        },

        "receipts": {
            "description": "A receipt represents a single unit of merchandise that was received.",
            "fields": [
                { "name": "guid", "type": "string", "format": "uuid", "description": "Uniquely identifies this record" },
                { "name": "agreement_guid", "type": "string", "format": "uuid", "references": "agreements.guid" },
                { "name": "item_guid", "type": "string", "format": "uuid", "references": "items.guid" },
                { "name": "price", "type": "decimal" },
                { "name": "vendor_receipt_number", "type": "string", "description": "Uniquely identifies this receipt in the vendor system. Main purpose is to guarantee idempotence" }
            ],
            "operations": [
                {
                    "method": "GET",
                    "path": "/:guid",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid" }
                    ],
                    "responses": {
                        "200" => { "type": "[receipt]" }
                    }
                },
                {
                    "method": "POST",
                    "parameters": [
                        { "name": "agreement_guid", "type": "string" },
                        { "name": "item_guid", "type": "string" },
                        { "name": "vendor_receipt_number", "type": "string" },
                        { "name": "price", "type": "decimal" }
                    ],
                    "responses": {
                        "200" => { "type": "receipt" }
                    }
                },
                {
                    "method": "DELETE",
                    "path": "/:guid",
                    "parameters": [
                        { "name": "guid", "type": "string", "format": "uuid" }
                    ]
                }
            ]
        },

        "validations": {
            "description": "A wrapper containing any validation errors when appropriate. Will be commonly used with 4xx HTTP response codes primarily for PUT, POST, and PATCH operations.",
            "fields": [
                { "name": "code", "type": "string", "description": "Unique error code for this validation error" },
                { "name": "messages", "type": "[string]", "description": "Description of what went wrong. Guaranteed to have at least one message, but there can be multiple messages if there are multiple validation errors", "minimum": 1 }
            ]
        }

    }
}
